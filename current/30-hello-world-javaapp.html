<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>HelloWorldWorkflow - Java Application</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">amazonica-swf-examples</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10-setting-up.html"><div class="inner"><span>Setting Up</span></div></a></li><li class="depth-1 "><a href="20-hello-world-app.html"><div class="inner"><span>HelloWorld Application</span></div></a></li><li class="depth-1  current"><a href="30-hello-world-javaapp.html"><div class="inner"><span>HelloWorldWorkflow - Java Application</span></div></a></li><li class="depth-1 "><a href="31-hello-world-wrapapp.html"><div class="inner"><span>HelloWorldWorkflow - Wrapped Java Application</span></div></a></li><li class="depth-1 "><a href="32-hello-world-wfapp.html"><div class="inner"><span>HelloWorldWorkflow Application</span></div></a></li><li class="depth-1 "><a href="89-related.html"><div class="inner"><span>Related</span></div></a></li><li class="depth-1 "><a href="99-other-versions.html"><div class="inner"><span>Other Versions</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>amazonica</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simpleworkflow</span></div></div></li><li class="depth-4 branch"><a href="amazonica.examples.simpleworkflow.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-4 branch"><a href="amazonica.examples.simpleworkflow.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4"><a href="amazonica.examples.simpleworkflow.wfapp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wfapp</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>clojusc</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aws</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swf</span></div></div></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>javaapp</span></div></div></li><li class="depth-6"><a href="clojusc.aws.examples.swf.javaapp.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><a href="clojusc.aws.examples.swf.wfapp.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>wfapp</span></div></a></li><li class="depth-4"><a href="clojusc.aws.examples.util.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#helloworldworkflow-java-application" name="helloworldworkflow-java-application"></a>HelloWorldWorkflow - Java Application</h1>
<h2><a href="#motivation" name="motivation"></a>Motivation</h2>
<p>This project provides a working Java application so that one may easily sanity check one’s own Clojure application against a known entity: the standard SWF example.</p>
<h2><a href="#usage" name="usage"></a>Usage</h2>
<h3><a href="#command-line" name="command-line"></a>Command Line</h3>
<p>To run the Java version of the sample SWF application, open up two terminals whose working directory is that of this project’s clone, and then run these two commands (one in each terminal):</p>
<pre><code>$ lein javaapp start worker
</code></pre>
<pre><code>$ lein javaapp run
</code></pre>
<h3><a href="#clojure-repl" name="clojure-repl"></a>Clojure REPL</h3>
<p>To run in the REPL, simply do the following:</p>
<pre><code>$ lein repl
</code></pre>
<pre><code class="clj">amazonica.examples.simpleworkflow.dev=&gt; (javaapp/-main :start :worker)
amazonica.examples.simpleworkflow.dev=&gt; (javaapp/-main :run)
</code></pre>
<h2><a href="#details" name="details"></a>Details</h2>
<p>This Java workflow example application is taken directly from the <a href="http://docs.aws.amazon.com/amazonswf/latest/awsflowguide/getting-started-example-helloworldworkflow.html">AWS Simpleworkflow Developer Guide</a>. However … it’s a bit trickier than that. As the <a href="">setup instructions</a> for that example application intimate, it’s basically required to use Eclipse and a series of libraries and Eclipse plugins in order to develop a Simpleworkflow application in Java. Some of the needed bits are: * AWS JDK * SWF Build Tools * AspectJ * AspectJ Weaver</p>
<p>The reason for these is that some of the code that you write for a Java SWF application isn’t actually used, but is rather used to generate other code that <em>is</em> used. Various interface and method annotations are used to accomplish this.</p>
<p>Generating the required code may be possible from the commandline without using Eclipse, but I wasn’t able to figure it out. Furthermore, getting Eclipse to actually generate the annotations-based code was totally non-trivial (which may be to having different versions of libraries and Eclipse itself than the AWS instructions). In the end, I was only able to genereate them “accidentally” (I discovered that clicking the “Reindex” button in the “Preferences -&gt; JDT Weaving” configuration pane produced the generated files in the expected <code>.apt_generated</code> directory).</p>
<p>As such, the generated files are included here in the example source code, in the <code>src/java/clojusc/aws/examples/swf/javaapp</code> directory. The files that were written by hand are the following:</p>
<ul>
  <li><code>GreeterActivities.java</code></li>
  <li><code>GreeterActivitiesImpl.java</code></li>
  <li><code>GreeterConstants.java</code></li>
  <li><code>GreeterMain.java</code></li>
  <li><code>GreeterWorker.java</code></li>
  <li><code>GreeterWorkflow.java</code></li>
  <li><code>GreeterWorkflowImpl.java</code></li>
</ul></div></div></div></body></html>