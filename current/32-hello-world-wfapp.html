<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>HelloWorldWorkflow Application</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">amazonica-swf-examples</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="10-setting-up.html"><div class="inner"><span>Setting Up</span></div></a></li><li class="depth-1 "><a href="20-hello-world-app.html"><div class="inner"><span>HelloWorld Application</span></div></a></li><li class="depth-1 "><a href="30-hello-world-javaapp.html"><div class="inner"><span>HelloWorldWorkflow - Java Application</span></div></a></li><li class="depth-1 "><a href="31-hello-world-wrapapp.html"><div class="inner"><span>HelloWorldWorkflow - Wrapped Java Application</span></div></a></li><li class="depth-1  current"><a href="32-hello-world-wfapp.html"><div class="inner"><span>HelloWorldWorkflow Application</span></div></a></li><li class="depth-1 "><a href="89-related.html"><div class="inner"><span>Related</span></div></a></li><li class="depth-1 "><a href="99-other-versions.html"><div class="inner"><span>Other Versions</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>amazonica</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simpleworkflow</span></div></div></li><li class="depth-4 branch"><a href="amazonica.examples.simpleworkflow.app.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>app</span></div></a></li><li class="depth-4 branch"><a href="amazonica.examples.simpleworkflow.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4"><a href="amazonica.examples.simpleworkflow.wfapp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wfapp</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>clojusc</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aws</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>examples</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>swf</span></div></div></li><li class="depth-5"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>javaapp</span></div></div></li><li class="depth-6"><a href="clojusc.aws.examples.swf.javaapp.run.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>run</span></div></a></li><li class="depth-5"><a href="clojusc.aws.examples.swf.wfapp.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>wfapp</span></div></a></li><li class="depth-4"><a href="clojusc.aws.examples.util.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#helloworldworkflow-application" name="helloworldworkflow-application"></a>HelloWorldWorkflow Application</h1>
<hr />
<p>WIP! Please distregard the content on this page for now: it is pending support for the full AWS Simple Workflow API. For more details, see the following:</p>
<ul>
  <li><a href="https://github.com/mcohen01/amazonica/issues/244">https://github.com/mcohen01/amazonica/issues/244</a></li>
</ul>
<hr />
<p>Adapted from the <a href="http://docs.aws.amazon.com/amazonswf/latest/awsflowguide/getting-started-example-helloworldworkflow.html">Java HelloWorldWorkflow Application</a>.</p>
<h2><a href="#registering-the-workflow-domain" name="registering-the-workflow-domain"></a>Registering the Workflow Domain</h2>
<pre><code class="clj">(def domain "hello-world-workflow")
(def version "1.0")

(swf/register-domain
  :name domain
  :workflow-execution-retention-period-in-days "30")
</code></pre>
<h2><a href="#helloworldworkflow-activities-worker-protocol" name="helloworldworkflow-activities-worker-protocol"></a>HelloWorldWorkflow Activities Worker Protocol</h2>
<p>HelloWorldWorkflow defines the activities interface in <code>IGreeterActivities</code>, as follows:</p>
<pre><code class="clj">(swf/register-activity-type
  :domain domain
  :name "hw-wf"
  :version version
  :default-task-schedule-to-start-timeout-seconds "300"
  :default-task-start-to-close-timeout-seconds "10")

(defprotocol IGreeterActivities
  "I am a sample interface that defines specific workflow activities for a
  'greeter'."
  (get-name [this]
    "Return the greeter's name.")
  (get-greeting [this value]
    "Given a value, usually a greeter's name, return a greeting.")
  (say [this greeting]
    "Given a greeting, display it (usually to `stdout`)."))
</code></pre>
<h2><a href="#helloworldworkflow-activities-worker-implementation" name="helloworldworkflow-activities-worker-implementation"></a>HelloWorldWorkflow Activities Worker Implementation</h2>
<p>HelloWorldWorkflow implements the activity methods in <code>GreeterActivities</code>, as follows:</p>
<pre><code class="clj">(defrecord GreeterActivities [])

(def greeter-actvities-behaviour
  "Implementation for `IGreeterActivities`."
  {:get-name (fn [this] "World")
   :get-greeting (fn [this value] (format "Hello, %s!" value))
   :say (fn [this greeting] (println greeting))})

(extend GreeterActivities IGreeterActivities greeter-actvities-behaviour)
</code></pre>
<p>Notice that the code is identical to the HelloWorld implementation. At its core, an AWS Flow Framework activity is just a method that executes some code and perhaps returns a result. The difference between a standard application and an Amazon SWF workflow application lies in how the workflow executes the activities, where the activities execute, and how the results are returned to the workflow worker.</p>
<h2><a href="#helloworldworkflow-workflow-worker" name="helloworldworkflow-workflow-worker"></a>HelloWorldWorkflow Workflow Worker</h2>
<h2><a href="#helloworldworkflow-workflow-and-activities-implementation" name="helloworldworkflow-workflow-and-activities-implementation"></a>HelloWorldWorkflow Workflow and Activities Implementation</h2>
<h2><a href="#helloworldworkflow-starter" name="helloworldworkflow-starter"></a>HelloWorldWorkflow Starter</h2></div></div></div></body></html>